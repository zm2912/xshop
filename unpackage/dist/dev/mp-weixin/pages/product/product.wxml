<view class="container"><view class="carousel"><swiper indicator-dots circular="true" duration="400"><block wx:for="{{product.image}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item"><view class="image-wrapper"><image class="loaded" src="{{item}}" mode="aspectFill"></image></view></swiper-item></block></swiper></view><view class="introduce-section"><text class="title">{{product.title||''}}</text><view class="price-box"><text class="price-tip">￥</text><text class="price">{{currentSku&&currentSku.price||0}}</text><text class="m-price">{{currentSku&&currentSku.market_price||0}}</text></view><view class="bot-row"><text>{{"销量: "+(product.sold_count||0)+" "+(product.unit&&product.unit.code||'')}}</text><text>{{"库存: "+(currentSku&&currentSku.stock||0)+" "+(product.unit&&product.unit.code||'')}}</text></view></view><view class="c-list"><view data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">购买类型</text><view class="con"><text class="selected-text">{{''+(currentSku&&currentSku.value||'')+''}}</text></view><text class="iconfont iconyou1"></text></view><view class="c-row b-b"><text class="tit">数量</text><view class="con quantity-box"><number-box bind:input="__e" vue-id="1c037ce0-1" min="{{1}}" disabled="{{true}}" value="{{quantity}}" data-event-opts="{{[['^input',[['__set_model',['','quantity','$event',[]]]]]]}}" bind:__l="__l"></number-box></view></view><block wx:if="{{couponList&&couponList.length}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">优惠券</text><text class="con t-r red">领取优惠券</text><text class="iconfont iconyou1"></text></view></block><block wx:if="{{product.promotion&&product.promotion.length}}"><view class="c-row b-b"><text class="tit">促销活动</text><view class="con-list"><block wx:for="{{product.promotion}}" wx:for-item="item" wx:for-index="i" wx:key="i"><text>{{item}}</text></block></view></view></block><block wx:if="{{product.service_tags&&product.service_tags.length}}"><view class="c-row b-b"><text class="tit">服务</text><view class="bz-list con"><block wx:for="{{product.service_tags}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text>{{item+" ·"}}</text></block></view></view></block></view><block wx:if="{{$root.g0}}"><groupon-box vue-id="1c037ce0-2" product="{{product}}" group-number="{{product.groupon&&product.groupon.group_number}}" value="{{id}}" data-event-opts="{{[['^addGroup',[['addGroup']]]]}}" bind:addGroup="__e" bind:__l="__l"></groupon-box></block><view class="eva-section"><view class="e-header"><text class="tit">评价</text><text>{{"("+(product.review_count||0)+")"}}</text><text class="tip">{{"好评率 "+good_review}}</text></view><block wx:for="{{reviewList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="eva-box"><image class="portrait" src="{{item.user.avatar||'/static/missing-face.png'}}" mode="aspectFill"></image><view class="right"><view class="name-box"><text class="name">{{item.user.nickname}}</text><text>{{item.star>3?'好评':item.star>2?'中评':'差评'}}</text></view><text class="con">{{item.content||'-'}}</text><view class="bot"><text class="attr">{{"购买类型："+item.sku.attributes}}</text><text class="time">{{item.create_time_text}}</text></view></view></view></block><block wx:if="{{showLoadMore}}"><view data-event-opts="{{[['tap',[['reviewLoadMore',['$event']]]]]}}" class="loadmore" bindtap="__e">加载更多</view></block><block wx:else><view class="loadmore">没有了</view></block></view><view class="detail-desc"><view class="d-header"><text>图文详情</text></view><rich-text nodes="{{product.content}}"></rich-text></view><view class="page-bottom"><navigator class="p-b-btn" url="/pages/index/index" open-type="switchTab"><text class="iconfont iconshouye1 "></text><text>首页</text></navigator><navigator class="p-b-btn" url="/pages/cart/cart" open-type="switchTab"><text class="iconfont icongouwuche2"></text><text>购物车</text></navigator><view data-event-opts="{{[['tap',[['toFavorite',['$event']]]]]}}" class="{{['p-b-btn',(product.favorite)?'active':'']}}" bindtap="__e"><text class="iconfont iconshoucang7"></text><text>收藏</text></view><block wx:if="{{product.groupon}}"><view class="action-btn-group groupon-btns"><view data-event-opts="{{[['tap',[['buy']]]]}}" class="btn" bindtap="__e"><text>{{"￥"+currentSku.price}}</text><text>单独购买</text></view><view data-event-opts="{{[['tap',[['buy',[['o',['order_type',1]]]]]]]}}" class="btn" bindtap="__e"><text>{{"￥"+current_group_price}}</text><text>发起拼团</text></view></view></block><block wx:else><view class="{{['action-btn-group',product.on_sale&&currentSku.stock>0?'':'disabled']}}"><button class="action-btn no-border buy-now-btn" type="primary" data-event-opts="{{[['tap',[['buy']]]]}}" bindtap="__e">立即购买</button><button class="action-btn no-border add-cart-btn" type="primary" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" bindtap="__e">加入购物车</button></view></block></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['toggleSpec',['$event']]]]]}}" class="{{['popup spec',specClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer attr-content" catchtap="__e"><view class="a-t"><image src="{{currentSku&&currentSku.image||product.image&&product.image[0]}}"></image><view class="right"><text class="price">{{currentSku&&currentSku.price}}</text><text class="stock">{{"库存："+(currentSku&&currentSku.stock)+" "+(product.unit&&product.unit.code)}}</text><view class="selected">已选：<text class="selected-text">{{''+(currentSku&&currentSku.value)+''}}</text></view></view></view><block wx:for="{{product.attrItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="attr-list"><text>{{product.attrGroup[index]}}</text><view class="item-list"><block wx:for="{{item}}" wx:for-item="childItem" wx:for-index="childIndex" wx:key="childIndex"><block wx:if="{{childItem.pid===item.id}}"><text data-event-opts="{{[['tap',[['selectSpec',[index,childIndex,'$0'],[[['product.attrItems','',index]]]]]]]}}" class="{{['tit',(attrChoose[index]===childIndex)?'selected':'',(skusStates[index][childIndex]==false)?'disabled':'']}}" bindtap="__e">{{''+childItem+''}}</text></block></block></view></view></block><view class="attr-quantity"><text>数量</text><number-box bind:input="__e" class="number-box" vue-id="1c037ce0-3" disabled="{{true}}" step="{{1}}" min="{{1}}" value="{{quantity}}" data-event-opts="{{[['^input',[['__set_model',['','quantity','$event',[]]]]]]}}" bind:__l="__l"></number-box></view><block wx:if="{{currentSku&&currentSku.stock>0}}"><button data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="btn" bindtap="__e">完成</button></block><block wx:else><button class="btn disabled">库存不足</button></block></view></view><share class="vue-ref" vue-id="1c037ce0-4" contentHeight="{{580}}" shareList="{{shareList}}" data-ref="share" bind:__l="__l"></share><coupon vue-id="1c037ce0-5" list="{{couponList}}" value="{{couponVisible}}" data-event-opts="{{[['^pop',[['couponPop']]],['^input',[['__set_model',['','couponVisible','$event',[]]]]]]}}" bind:pop="__e" bind:input="__e" bind:__l="__l"></coupon></view>